<script>
Mousetrap.bindGlobal(['command+e', 'command+r', 'command+i', 'ctrl+r'], function() {
  $('#query').submit();
});
</script>

<% if @error.present? %>
  <pre class="alert alert-danger"><%= @error %></pre>
<% end %>

<form action="/queries" method="post" role="form" id="query">
  <div class="form-group">
    <textarea name="sql" rows="7" class="form-control col-md-12" data-editor="sql"><%= @sql %></textarea>
  </div>

  <div class="form-group" style="text-align: right">
    <button type="submit" class="btn btn-primary">Execute</button>
    <% if @result_orientation == 'grid' %>
      <button type="submit" name="result_orientation" value="list" class="btn btn-primary">
        <span class="glyphicon glyphicon-th-list"></span>
      </a>
    <% else %>
      <button type="submit" name="result_orientation" value="grid" class="btn btn-primary">
        <span class="glyphicon glyphicon-th"></span>
      </a>
    <% end %>
  </div>

  <% if @columns && @rows %>
    <%= erb @result_orientation.to_sym %>
  <% end %>
</form>
